services:
  mcp-server:
    build:
      context: ./server
    image: travel-mcp-server:latest
    # This service is here just so `docker compose build` creates the image.
    # We don't actually need to run this service; the agent uses `docker run` on the image.

  agent:
    build:
      context: ./agent
    image: travel-mcp-agent:latest
    # No depends_on, because agent doesn't need mcp-server *running*, only the image built.
    environment:
      - SERVER_IMAGE=travel-mcp-server:latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    stdin_open: true
    tty: true
